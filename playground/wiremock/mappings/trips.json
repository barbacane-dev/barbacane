{
  "mappings": [
    {
      "name": "Search Trips",
      "request": {
        "method": "GET",
        "urlPathPattern": "/api/v3/trips",
        "queryParameters": {
          "origin": { "matches": ".*" },
          "destination": { "matches": ".*" }
        }
      },
      "response": {
        "status": 200,
        "headers": { "Content-Type": "application/json" },
        "jsonBody": {
          "search_id": "{{randomValue type='UUID'}}",
          "outbound": [
            {
              "id": "f08d2c3e-8d6f-7f5f-2c1f-4e5f6a7b8c9d",
              "origin": {
                "id": "efdbb9d1-02c2-4bc3-afb7-6788d8782b1e",
                "name": "Berlin Hauptbahnhof",
                "code": "BHF"
              },
              "destination": {
                "id": "b2e783e1-c824-4d63-b37a-d8ee6c0b95da",
                "name": "Paris Gare du Nord",
                "code": "XPG"
              },
              "departure_time": "{{now offset='+2 hours' format='yyyy-MM-dd\\'T\\'HH:mm:ss\\'Z\\''}}",
              "arrival_time": "{{now offset='+10 hours' format='yyyy-MM-dd\\'T\\'HH:mm:ss\\'Z\\''}}",
              "duration_minutes": 480,
              "train_number": "ICE 1234",
              "operator": { "code": "DB", "name": "Deutsche Bahn" },
              "prices": [
                { "class": "second", "amount": 89.90, "currency": "EUR", "flexibility": "non_refundable", "available": true },
                { "class": "second", "amount": 129.90, "currency": "EUR", "flexibility": "semi_flexible", "available": true },
                { "class": "first", "amount": 189.90, "currency": "EUR", "flexibility": "semi_flexible", "available": true },
                { "class": "first", "amount": 249.90, "currency": "EUR", "flexibility": "fully_flexible", "available": true }
              ],
              "amenities": ["wifi", "restaurant", "cafe"],
              "available_seats": 42
            },
            {
              "id": "a19e3d4f-9e7f-8f6f-3d2f-5f6a7b8c9d0e",
              "origin": {
                "id": "efdbb9d1-02c2-4bc3-afb7-6788d8782b1e",
                "name": "Berlin Hauptbahnhof",
                "code": "BHF"
              },
              "destination": {
                "id": "b2e783e1-c824-4d63-b37a-d8ee6c0b95da",
                "name": "Paris Gare du Nord",
                "code": "XPG"
              },
              "departure_time": "{{now offset='+5 hours' format='yyyy-MM-dd\\'T\\'HH:mm:ss\\'Z\\''}}",
              "arrival_time": "{{now offset='+13 hours' format='yyyy-MM-dd\\'T\\'HH:mm:ss\\'Z\\''}}",
              "duration_minutes": 480,
              "train_number": "TGV 5678",
              "operator": { "code": "SNCF", "name": "SNCF Voyageurs" },
              "prices": [
                { "class": "second", "amount": 79.00, "currency": "EUR", "flexibility": "non_refundable", "available": true },
                { "class": "first", "amount": 159.00, "currency": "EUR", "flexibility": "semi_flexible", "available": true }
              ],
              "amenities": ["wifi", "cafe"],
              "available_seats": 18
            }
          ],
          "return": [],
          "meta": { "search_time_ms": 234, "cached": false }
        },
        "transformers": ["response-template"]
      }
    },
    {
      "name": "Get Trip Details",
      "request": {
        "method": "GET",
        "urlPath": "/api/v3/trips/f08d2c3e-8d6f-7f5f-2c1f-4e5f6a7b8c9d"
      },
      "response": {
        "status": 200,
        "headers": { "Content-Type": "application/json" },
        "jsonBody": {
          "id": "f08d2c3e-8d6f-7f5f-2c1f-4e5f6a7b8c9d",
          "origin": {
            "id": "efdbb9d1-02c2-4bc3-afb7-6788d8782b1e",
            "name": "Berlin Hauptbahnhof",
            "code": "BHF",
            "city": "Berlin",
            "country_code": "DE"
          },
          "destination": {
            "id": "b2e783e1-c824-4d63-b37a-d8ee6c0b95da",
            "name": "Paris Gare du Nord",
            "code": "XPG",
            "city": "Paris",
            "country_code": "FR"
          },
          "departure_time": "2025-03-15T08:00:00Z",
          "arrival_time": "2025-03-15T16:00:00Z",
          "duration_minutes": 480,
          "train_number": "ICE 1234",
          "operator": { "code": "DB", "name": "Deutsche Bahn", "logo_url": "https://example.com/db-logo.png" },
          "segments": [
            {
              "origin": { "id": "efdbb9d1-02c2-4bc3-afb7-6788d8782b1e", "name": "Berlin Hauptbahnhof" },
              "destination": { "id": "c75d8a9f-5a3d-4c2e-9f8e-1b2c3d4e5f6a", "name": "Cologne Hbf" },
              "departure_time": "2025-03-15T08:00:00Z",
              "arrival_time": "2025-03-15T12:30:00Z",
              "train_number": "ICE 1234",
              "operator": "DB",
              "platform_departure": "4",
              "platform_arrival": "2"
            },
            {
              "origin": { "id": "c75d8a9f-5a3d-4c2e-9f8e-1b2c3d4e5f6a", "name": "Cologne Hbf" },
              "destination": { "id": "b2e783e1-c824-4d63-b37a-d8ee6c0b95da", "name": "Paris Gare du Nord" },
              "departure_time": "2025-03-15T13:00:00Z",
              "arrival_time": "2025-03-15T16:00:00Z",
              "train_number": "TGV 9876",
              "operator": "SNCF",
              "platform_departure": "5",
              "platform_arrival": "3"
            }
          ],
          "prices": [
            { "class": "second", "amount": 89.90, "currency": "EUR", "flexibility": "non_refundable", "available": true },
            { "class": "first", "amount": 189.90, "currency": "EUR", "flexibility": "semi_flexible", "available": true }
          ],
          "amenities": ["wifi", "restaurant", "cafe"],
          "available_seats": 42
        }
      }
    },
    {
      "name": "Get Trip Realtime Status",
      "request": {
        "method": "GET",
        "urlPathPattern": "/api/v3/trips/.*/realtime"
      },
      "response": {
        "status": 200,
        "headers": { "Content-Type": "application/json" },
        "jsonBody": {
          "trip_id": "f08d2c3e-8d6f-7f5f-2c1f-4e5f6a7b8c9d",
          "status": "in_transit",
          "current_location": { "latitude": 51.2217, "longitude": 6.7762 },
          "next_stop": {
            "id": "c75d8a9f-5a3d-4c2e-9f8e-1b2c3d4e5f6a",
            "name": "Cologne Hbf"
          },
          "delay_minutes": 5,
          "updated_at": "{{now format='yyyy-MM-dd\\'T\\'HH:mm:ss\\'Z\\''}}"
        },
        "transformers": ["response-template"]
      }
    },
    {
      "name": "Get Trip - Not Found",
      "request": {
        "method": "GET",
        "urlPathPattern": "/api/v3/trips/[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"
      },
      "response": {
        "status": 404,
        "headers": { "Content-Type": "application/problem+json" },
        "jsonBody": {
          "code": "TRIP_NOT_FOUND",
          "message": "Trip not found",
          "documentation_url": "https://docs.trains.example.com/errors#TRIP_NOT_FOUND"
        }
      },
      "priority": 10
    }
  ]
}
